# ğŸ”§ TypeScript ç±»å‹é”™è¯¯ä¿®å¤è¯´æ˜

## é—®é¢˜æ¦‚è¿°

åœ¨è¿ç§»è¿‡ç¨‹ä¸­é‡åˆ°äº† 3 ä¸ªä¸»è¦çš„ TypeScript ç±»å‹é”™è¯¯ï¼š

1. âŒ æ‰¾ä¸åˆ°æ¨¡å— `"astro-spaceship/constants"` æˆ–å…¶ç›¸åº”çš„ç±»å‹å£°æ˜
2. âŒ ç»‘å®šå…ƒç´  `"data"` éšå¼å…·æœ‰ `"any"` ç±»å‹
3. âŒ å‚æ•° `"note"` éšå¼å…·æœ‰ `"any"` ç±»å‹

---

## âœ… ä¿®å¤æ–¹æ¡ˆ

### 1. ç§»é™¤å¯¹ `astro-spaceship/constants` çš„ä¾èµ–

**åŸå› **ï¼š`astro-spaceship` åŒ…çš„å†…éƒ¨æ¨¡å—è·¯å¾„æ— æ³•æ­£ç¡®è§£æ

**è§£å†³æ–¹æ¡ˆ**ï¼šç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸² `'documents'` æ›¿ä»£ `DOCUMENTS_COLLECTION_NAME`

#### ä¿®å¤çš„æ–‡ä»¶ï¼š
- `src/pages/index.astro`
- `src/pages/vault/index.astro`
- `src/pages/tags/[...tag].astro`

**ä¿®æ”¹å‰ï¼š**
```typescript
import { DOCUMENTS_COLLECTION_NAME } from 'astro-spaceship/constants';
const allNotes = await getCollection(DOCUMENTS_COLLECTION_NAME, ({ data }) => {
  return data.publish !== false;
});
```

**ä¿®æ”¹åï¼š**
```typescript
const allNotes = await getCollection('documents', ({ data }: any) => {
  return data.publish !== false;
});
```

---

### 2. ä¸ºå›è°ƒå‡½æ•°å‚æ•°æ·»åŠ ç±»å‹æ³¨è§£

**åŸå› **ï¼šTypeScript æ— æ³•æ¨æ–­ `getCollection` å›è°ƒä¸­çš„å‚æ•°ç±»å‹

**è§£å†³æ–¹æ¡ˆ**ï¼šæ˜¾å¼æ·»åŠ  `: any` ç±»å‹æ³¨è§£

#### ç¤ºä¾‹ï¼š
```typescript
// ä¿®æ”¹å‰
allNotes.map((note) => ...)

// ä¿®æ”¹å
allNotes.map((note: any) => ...)
```

---

### 3. é‡å†™ `vault/[...slug].astro`

**åŸå› **ï¼šåŸå®ç°ä¾èµ– `astro-spaceship` çš„å†…éƒ¨ç»„ä»¶ï¼Œæ— æ³•æ­£ç¡®å¯¼å…¥

**è§£å†³æ–¹æ¡ˆ**ï¼šåˆ›å»ºè‡ªå®šä¹‰å®ç°ï¼Œä¸ä¾èµ–å¤–éƒ¨ç»„ä»¶

#### æ–°å®ç°ç‰¹æ€§ï¼š
- âœ… ä½¿ç”¨ Astro åŸç”Ÿ `getCollection` API
- âœ… è‡ªå®šä¹‰å¸ƒå±€å’Œæ ·å¼
- âœ… æ”¯æŒ Markdown æ¸²æŸ“
- âœ… é›†æˆä¸»é¢˜åˆ‡æ¢
- âœ… æ˜¾ç¤ºæ ‡ç­¾å’Œå…ƒæ•°æ®

---

### 4. æ·»åŠ  Tailwind Typography æ’ä»¶

**åŸå› **ï¼šMarkdown å†…å®¹éœ€è¦ç¾åŒ–çš„æ’ç‰ˆæ ·å¼

**æ“ä½œ**ï¼š
1. æ·»åŠ ä¾èµ– `@tailwindcss/typography`
2. åˆ›å»º `tailwind.config.mjs` é…ç½®æ–‡ä»¶
3. å¯ç”¨ `prose` ç±»æ”¯æŒ

---

## ğŸ“ ä¿®æ”¹æ–‡ä»¶æ¸…å•

### å·²ä¿®æ”¹çš„æ–‡ä»¶

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|---------|
| `src/pages/index.astro` | ç§»é™¤ constants å¯¼å…¥ï¼Œæ·»åŠ ç±»å‹æ³¨è§£ |
| `src/pages/vault/index.astro` | ç§»é™¤ constants å¯¼å…¥ï¼Œæ·»åŠ ç±»å‹æ³¨è§£ |
| `src/pages/tags/[...tag].astro` | ç§»é™¤ constants å¯¼å…¥ï¼Œæ·»åŠ ç±»å‹æ³¨è§£ |
| `src/pages/vault/[...slug].astro` | å®Œå…¨é‡å†™ï¼Œä½¿ç”¨è‡ªå®šä¹‰å®ç° |
| `package.json` | æ·»åŠ  `@tailwindcss/typography` ä¾èµ– |

### æ–°å¢çš„æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `tailwind.config.mjs` | Tailwind é…ç½®ï¼Œå¯ç”¨ Typography æ’ä»¶ |

---

## ğŸš€ éªŒè¯æ­¥éª¤

### 1. é‡æ–°å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

### 3. æ£€æŸ¥é¡µé¢

è®¿é—®ä»¥ä¸‹é¡µé¢ç¡®è®¤æ²¡æœ‰é”™è¯¯ï¼š

- âœ… `http://localhost:4321/` - é¦–é¡µ
- âœ… `http://localhost:4321/vault` - ç¬”è®°åˆ—è¡¨
- âœ… `http://localhost:4321/vault/welcome` - å•ä¸ªç¬”è®°
- âœ… `http://localhost:4321/tags/welcome` - æ ‡ç­¾é¡µé¢

---

## ğŸ¨ æ ·å¼è¯´æ˜

### Prose ç±»

ä½¿ç”¨ Tailwind Typography çš„ `prose` ç±»æ¥ç¾åŒ– Markdown å†…å®¹ï¼š

```html
<div class="prose prose-lg dark:prose-invert max-w-none">
  <Content />
</div>
```

### ç‰¹æ€§ï¼š
- âœ… è‡ªåŠ¨ç¾åŒ–æ ‡é¢˜ã€æ®µè½ã€åˆ—è¡¨
- âœ… ä»£ç å—è¯­æ³•é«˜äº®
- âœ… å“åº”å¼æ’ç‰ˆ
- âœ… æš—è‰²æ¨¡å¼æ”¯æŒ (`dark:prose-invert`)

---

## ğŸ’¡ æ³¨æ„äº‹é¡¹

### 1. Content Collection åç§°

ç¡®ä¿ `src/collections/documents.ts` ä¸­å¯¼å‡ºçš„é›†åˆåç§°ä¸º `'documents'`ï¼š

```typescript
export default {
  ['documents']: defineCollection({
    // ...
  })
}
```

### 2. ç±»å‹å®‰å…¨

è™½ç„¶ä½¿ç”¨äº† `: any` ç±»å‹æ³¨è§£æ¥å¿«é€Ÿä¿®å¤é”™è¯¯ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å»ºè®®ï¼š

- å®šä¹‰æ˜ç¡®çš„æ¥å£ç±»å‹
- ä½¿ç”¨ TypeScript çš„ç±»å‹æ¨æ–­
- æ·»åŠ é€‚å½“çš„ç±»å‹å®ˆå«

**æ”¹è¿›ç¤ºä¾‹ï¼š**
```typescript
// å®šä¹‰ç¬”è®°ç±»å‹
interface Note {
  id: string;
  data: {
    title?: string;
    description?: string;
    tags?: string[];
    publish?: boolean;
  };
}

// ä½¿ç”¨ç±»å‹
const allNotes = await getCollection('documents') as Note[];
```

### 3. Wiki é“¾æ¥æ”¯æŒ

å½“å‰å®ç°ä¸æ”¯æŒ `[[wikilink]]` çš„è‡ªåŠ¨è§£æã€‚å¦‚éœ€æ­¤åŠŸèƒ½ï¼Œéœ€è¦ï¼š

- æ·»åŠ  markdown æ’ä»¶å¤„ç† wiki é“¾æ¥
- æˆ–ä½¿ç”¨ `astro-spaceship` çš„å®Œæ•´é…ç½®ï¼ˆéœ€è§£å†³ä¾èµ–é—®é¢˜ï¼‰

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šä¾ç„¶çœ‹åˆ°ç±»å‹é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ¸…é™¤ç¼“å­˜å¹¶é‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install

# é‡å¯å¼€å‘æœåŠ¡å™¨
npm run dev
```

### é—®é¢˜ï¼šæ ·å¼ä¸æ˜¾ç¤º

**æ£€æŸ¥ï¼š**
1. `tailwind.config.mjs` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
2. `@tailwindcss/typography` æ˜¯å¦æ­£ç¡®å®‰è£…
3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

### é—®é¢˜ï¼šç¬”è®°å†…å®¹ä¸æ˜¾ç¤º

**æ£€æŸ¥ï¼š**
1. ç¬”è®°æ–‡ä»¶æ˜¯å¦åœ¨ `src/content/vault/` ç›®å½•
2. Frontmatter ä¸­ `publish: true` æ˜¯å¦è®¾ç½®
3. æ–‡ä»¶æ‰©å±•åæ˜¯å¦ä¸º `.md`

---

## âœ¨ ä¸‹ä¸€æ­¥ä¼˜åŒ–å»ºè®®

1. **æ·»åŠ å®Œæ•´çš„ç±»å‹å®šä¹‰**
   - åˆ›å»º `src/types/content.ts`
   - å®šä¹‰ Noteã€Tagã€Author æ¥å£

2. **å®ç° Wiki é“¾æ¥è§£æ**
   - ä½¿ç”¨ remark æ’ä»¶å¤„ç† `[[]]` è¯­æ³•
   - è‡ªåŠ¨ç”Ÿæˆç¬”è®°é—´çš„é“¾æ¥

3. **æ·»åŠ åå‘é“¾æ¥åŠŸèƒ½**
   - æ‰«ææ‰€æœ‰ç¬”è®°æ‰¾åˆ°å¼•ç”¨
   - åœ¨ç¬”è®°åº•éƒ¨æ˜¾ç¤ºè¢«å¼•ç”¨çš„åœ°æ–¹

4. **ä¼˜åŒ–æœç´¢åŠŸèƒ½**
   - é›†æˆå…¨æ–‡æœç´¢
   - æ”¯æŒæ ‡ç­¾è¿‡æ»¤

---

## ğŸ“– å‚è€ƒèµ„æ–™

- [Astro Content Collections](https://docs.astro.build/en/guides/content-collections/)
- [Tailwind Typography](https://tailwindcss.com/docs/typography-plugin)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)

---

**ä¿®å¤å®Œæˆï¼ç°åœ¨å¯ä»¥æ­£å¸¸å¼€å‘äº†ã€‚** ğŸ‰

