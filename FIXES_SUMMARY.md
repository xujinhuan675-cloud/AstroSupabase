# ğŸ”§ é—®é¢˜ä¿®å¤æ€»ç»“

## ä¿®å¤æ—¥æœŸ
2025å¹´10æœˆ30æ—¥

## é—®é¢˜1ï¼šé¡µé¢å¸ƒå±€é”™è½ï¼ˆä¸‰æ å¸ƒå±€æ˜¾ç¤ºä¸ºä¸€åˆ—ï¼‰

### åŸå› 
`src/styles/quartz/layout.css` ä¸­çš„ CSS Grid é…ç½®ä¸ HTML ç»“æ„çš„ `grid-area` å‘½åä¸åŒ¹é…ï¼Œå¯¼è‡´å¸ƒå±€æ˜¾ç¤ºå¼‚å¸¸ã€‚

### ä¿®å¤å†…å®¹
**æ–‡ä»¶**: `src/styles/quartz/layout.css`

âœ… æ›´æ”¹äº†ä»¥ä¸‹å†…å®¹ï¼š
1. **Grid åˆ—å®½é…ç½®**
   - ä» `grid-template-columns: var(--side-panel-width) auto var(--side-panel-width)` 
   - æ”¹ä¸º `grid-template-columns: var(--side-panel-width) 1fr var(--side-panel-width)`
   - ä½¿ç”¨ `1fr` è®©ä¸­é—´å†…å®¹åŒºè‡ªåŠ¨å¡«å……å‰©ä½™ç©ºé—´

2. **æ·»åŠ äº†å®½åº¦çº¦æŸ**
   ```css
   .center {
     grid-area: grid-center;
     padding: 0 2rem;
     width: 100%;
     max-width: var(--page-width);  /* é™åˆ¶æœ€å¤§å®½åº¦ä¸º 800px */
     margin: 0 auto;                 /* å±…ä¸­æ˜¾ç¤º */
   }
   ```

3. **æ”¹è¿›å“åº”å¼è®¾è®¡**
   - å¹³æ¿å¸ƒå±€ï¼š2åˆ—å¸ƒå±€ï¼ˆå·¦ä¾§è¾¹æ  + å†…å®¹ï¼‰
   - ç§»åŠ¨å¸ƒå±€ï¼š1åˆ—å¸ƒå±€ï¼ˆæ ˆå¼æ˜¾ç¤ºï¼‰

### ç°åœ¨çš„å¸ƒå±€ç»“æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Left Sidebar  â”‚ Header  â”‚ Right SB  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æœç´¢ã€å¯¼èˆª    â”‚ æ–‡ç« æ ‡é¢˜ â”‚ ç›®å½•ã€é“¾æ¥â”‚
â”‚ PageTitle     â”‚         â”‚ å›¾è°±      â”‚
â”‚ Explorer      â”‚ å†…å®¹    â”‚          â”‚
â”‚ åˆ‡æ¢æŒ‰é’®      â”‚ è¯¦ç»†    â”‚ åå‘é“¾æ¥  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## é—®é¢˜2ï¼šé¦–é¡µä¸æ˜¾ç¤ºå¯¼å…¥çš„æ–‡ç« 

### åŸå› 
`src/lib/articles.ts` ä¸­çš„ `getArticles()` å‡½æ•°æ²¡æœ‰è¿‡æ»¤å·²å‘å¸ƒçš„æ–‡ç« ï¼Œå¯¼è‡´æ— æ³•è·å–æ­£ç¡®çš„æ•°æ®ã€‚

### ä¿®å¤å†…å®¹
**æ–‡ä»¶**: `src/lib/articles.ts`

âœ… æ·»åŠ äº†å‘å¸ƒçŠ¶æ€è¿‡æ»¤ï¼š
```typescript
export async function getArticles(limit?: number): Promise<Article[]> {
  let query = db
    .select()
    .from(articles)
    .where(eq(articles.status, 'published'))  // âœ… åªæŸ¥è¯¢å·²å‘å¸ƒæ–‡ç« 
    .orderBy(desc(articles.publishedAt));      // âœ… æŒ‰å‘å¸ƒæ—¶é—´é™åºæ’åˆ—

  if (limit) {
    return await query.limit(limit);
  }

  return await query;
}
```

### å·¥ä½œæµç¨‹éªŒè¯
```
âœ… æœ¬åœ° content/*.md æ–‡ä»¶
   â†“
âœ… GitHub Actions è§¦å‘å¯¼å…¥
   â†“
âœ… å¯¼å…¥è„šæœ¬ (import-from-git.ts)
   - è§£æ Markdown å’Œ frontmatter
   - æå–åŒå‘é“¾æ¥ [[...]]
   - æå–æ ‡ç­¾
   - è®¾ç½® status = 'published'
   - è®¾ç½® publishedAt = å½“å‰æ—¶é—´
   â†“
âœ… æ•°æ®å­˜å‚¨åˆ° Supabase
   - articles è¡¨ï¼ˆä¸»æ–‡ç« æ•°æ®ï¼‰
   - article_tags è¡¨ï¼ˆæ ‡ç­¾ï¼‰
   - article_links è¡¨ï¼ˆåŒå‘é“¾æ¥ï¼‰
   â†“
âœ… é¦–é¡µæŸ¥è¯¢ (getArticles(6))
   - è¿‡æ»¤ status='published'
   - æŒ‰ publishedAt æ’åº
   - æ˜¾ç¤ºæœ€æ–° 6 ç¯‡æ–‡ç« 
```

---

## æ–°å¢è¯Šæ–­å·¥å…·

### è¯Šæ–­è„šæœ¬
**æ–‡ä»¶**: `scripts/diagnose-db.ts`

åŠŸèƒ½ï¼šæ£€æŸ¥ Supabase æ•°æ®åº“ä¸­çš„æ‰€æœ‰æ•°æ®ï¼ŒåŒ…æ‹¬ï¼š
- âœ… æ–‡ç« æ€»æ•°å’Œå‘å¸ƒçŠ¶æ€
- âœ… æ¯ç¯‡æ–‡ç« çš„è¯¦ç»†ä¿¡æ¯ï¼ˆIDã€Slugã€ä½œè€…ã€æ—¶é—´æˆ³ç­‰ï¼‰
- âœ… æ ‡ç­¾æå–æ˜¯å¦æ­£ç¡®
- âœ… åŒå‘é“¾æ¥æ˜¯å¦æ­£ç¡®ä¿å­˜
- âœ… æ¨¡æ‹Ÿé¦–é¡µæŸ¥è¯¢ç»“æœ

### ä½¿ç”¨æ–¹æ³•
```bash
npm run diagnose
```

### è¾“å‡ºç¤ºä¾‹
```
ğŸ“Š å¼€å§‹æ•°æ®åº“è¯Šæ–­...

1ï¸âƒ£  æ£€æŸ¥æ–‡ç« æ€»æ•°:
   æ€»æ•°: 1

2ï¸âƒ£  æ£€æŸ¥å·²å‘å¸ƒæ–‡ç« :
   å·²å‘å¸ƒ: 1

3ï¸âƒ£  æ–‡ç« è¯¦æƒ…:
   1. æ¬¢è¿ä½¿ç”¨ Quartz æ•°å­—èŠ±å›­
      ID: 2
      Slug: welcome-to-quartz-digital-garden
      Status: published
      Author: system
      Published: 2025-10-30T...
      
4ï¸âƒ£  æ£€æŸ¥æ ‡ç­¾:
   æ€»æ•°: 3
   Article 2: çŸ¥è¯†ç®¡ç†, æ•ˆç‡å·¥å…·, ç¬”è®°æ–¹æ³•

5ï¸âƒ£  æ£€æŸ¥åŒå‘é“¾æ¥:
   æ€»æ•°: 0

6ï¸âƒ£  æµ‹è¯•é¦–é¡µæŸ¥è¯¢ (getArticles(6)):
   åº”è¯¥æ˜¾ç¤º: 1 ç¯‡æ–‡ç« 
   1. æ¬¢è¿ä½¿ç”¨ Quartz æ•°å­—èŠ±å›­

âœ… è¯Šæ–­å®Œæˆ!
```

---

## éƒ¨ç½²æ­¥éª¤

### 1ï¸âƒ£ æœ¬åœ°æµ‹è¯•
```bash
# å®‰è£…ä¾èµ–
npm install

# è¿è¡Œè¯Šæ–­ï¼ˆæ£€æŸ¥æ•°æ®åº“ï¼‰
npm run diagnose

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# è®¿é—® http://localhost:3000 æŸ¥çœ‹é¦–é¡µ
```

### 2ï¸âƒ£ éªŒè¯å¸ƒå±€
- [ ] é¦–é¡µæ˜¾ç¤ºä¸‰æ å¸ƒå±€ï¼ˆå·¦ä¾§å¯¼èˆª | ä¸­é—´å†…å®¹ | å³ä¾§è¾¹æ ï¼‰
- [ ] ç‚¹å‡»æ–‡ç« è¿›å…¥è¯¦æƒ…é¡µï¼Œç¡®ä¿å¸ƒå±€æ­£ç¡®
- [ ] æ£€æŸ¥å“åº”å¼è®¾è®¡ï¼ˆç¼©å°æµè§ˆå™¨çª—å£ï¼‰

### 3ï¸âƒ£ éªŒè¯å†…å®¹
- [ ] é¦–é¡µæ˜¾ç¤ºæœ€æ–° 6 ç¯‡å·²å‘å¸ƒæ–‡ç« 
- [ ] æ–‡ç« å¡ç‰‡æ˜¾ç¤ºæ ‡é¢˜ã€ä½œè€…ã€æ—¥æœŸã€æ‘˜è¦
- [ ] ç‚¹å‡»"é˜…è¯»æ›´å¤š"è¿›å…¥æ–‡ç« è¯¦æƒ…é¡µ

### 4ï¸âƒ£ GitHub æäº¤å’Œéƒ¨ç½²
```bash
# æäº¤æ›´æ”¹
git add .
git commit -m "fix: ä¿®å¤ä¸‰æ å¸ƒå±€å’Œé¦–é¡µæ–‡ç« æŸ¥è¯¢"
git push

# GitHub Actions è‡ªåŠ¨è§¦å‘
# 1. å¯¼å…¥ content/ ç›®å½•çš„ Markdown æ–‡ä»¶
# 2. æ›´æ–° Supabase æ•°æ®åº“
# 3. éƒ¨ç½²åˆ° Vercel
```

### 5ï¸âƒ£ æ¸…é™¤ Vercel ç¼“å­˜
è®¿é—® Vercel æ§åˆ¶é¢æ¿ï¼š
1. è¿›å…¥æ‚¨çš„é¡¹ç›®
2. ç‚¹å‡» "Settings" â†’ "Deployments"
3. æ‰¾åˆ°æœ€æ–°éƒ¨ç½²ï¼Œç‚¹å‡» "Redeploy"
4. ç­‰å¾…éƒ¨ç½²å®Œæˆ

æˆ–ä½¿ç”¨å‘½ä»¤ï¼š
```bash
vercel deploy --prod --force
```

---

## ç³»ç»Ÿå¥åº·æ£€æŸ¥æ¸…å•

- [x] å¸ƒå±€ä¿®å¤ï¼ˆCSS Grid é…ç½®ï¼‰
- [x] é¦–é¡µæŸ¥è¯¢ä¿®å¤ï¼ˆå‘å¸ƒçŠ¶æ€è¿‡æ»¤ï¼‰
- [x] è¯Šæ–­è„šæœ¬åˆ›å»º
- [x] æ–‡æ¡£æ›´æ–°
- [ ] Vercel éƒ¨ç½²å¹¶éªŒè¯
- [ ] æµ‹è¯•æ–‡ç« å¯¼å…¥æµç¨‹
- [ ] æ£€æŸ¥æ‰€æœ‰åŒå‘é“¾æ¥æ˜¯å¦æ­£ç¡®
- [ ] éªŒè¯æ ‡ç­¾æå–åŠŸèƒ½

---

## å¸¸è§é—®é¢˜æ’æŸ¥

### Q: é¦–é¡µä»ç„¶ä¸æ˜¾ç¤ºæ–‡ç« æ€ä¹ˆåŠï¼Ÿ

**A:** è¿è¡Œè¯Šæ–­è„šæœ¬æ£€æŸ¥æ•°æ®åº“ï¼š
```bash
npm run diagnose
```

æ£€æŸ¥è¾“å‡ºä¸­çš„ï¼š
1. **æ–‡ç« æ€»æ•°** - æ˜¯å¦ > 0
2. **å·²å‘å¸ƒæ•°** - æ˜¯å¦ > 0
3. **Article çŠ¶æ€** - æ˜¯å¦éƒ½æ˜¯ 'published'
4. **publishedAt** - æ˜¯å¦éƒ½æœ‰æ—¶é—´æˆ³

å¦‚æœæ–‡ç« æ•°ä¸º 0ï¼Œè¡¨ç¤º GitHub Actions å¯¼å…¥å¤±è´¥ï¼Œæ£€æŸ¥ `.github/workflows/deploy.yml`

### Q: å¸ƒå±€ä»ç„¶é”™ä¹±æ€ä¹ˆåŠï¼Ÿ

**A:** 
1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼š`Ctrl+Shift+Delete` æˆ– `Cmd+Shift+Delete`
2. ç¡¬åˆ·æ–°é¡µé¢ï¼š`Ctrl+F5` æˆ– `Cmd+Shift+R`
3. æ£€æŸ¥ DevTools ä¸­çš„ Network æ ‡ç­¾ï¼Œç¡®ä¿ CSS å·²åŠ è½½

### Q: å¦‚ä½•æµ‹è¯•å¯¼å…¥åŠŸèƒ½ï¼Ÿ

**A:** 
```bash
# æœ¬åœ°æµ‹è¯•ï¼ˆéœ€è¦ DATABASE_URL ç¯å¢ƒå˜é‡ï¼‰
npm run import:git

# ç”Ÿäº§ç¯å¢ƒï¼ˆGitHub Actions è‡ªåŠ¨è¿è¡Œï¼‰
git push  # è§¦å‘ GitHub Actions
```

---

## ç›¸å…³æ–‡ä»¶æ›´æ”¹

- âœ… `src/styles/quartz/layout.css` - Grid å¸ƒå±€ä¿®å¤
- âœ… `src/lib/articles.ts` - æ·»åŠ å‘å¸ƒçŠ¶æ€è¿‡æ»¤
- âœ… `scripts/diagnose-db.ts` - æ–°å»ºè¯Šæ–­è„šæœ¬
- âœ… `package.json` - æ·»åŠ  diagnose å‘½ä»¤

---

## ä¸‹ä¸€æ­¥å·¥ä½œ

1. **é¦–é¡µç¾åŒ–** - ä¼˜åŒ–å¡ç‰‡è®¾è®¡å’Œæ’ç‰ˆ
2. **æœç´¢åŠŸèƒ½** - å®ç°å…¨æ–‡æœç´¢
3. **åˆ†ç±»é¡µé¢** - æŒ‰æ ‡ç­¾å’Œåˆ†ç±»æµè§ˆæ–‡ç« 
4. **çŸ¥è¯†å›¾è°±** - å¯è§†åŒ–æ–‡ç« å…³ç³»ç½‘ç»œ
5. **ç¤¾äº¤åˆ†äº«** - æ·»åŠ åˆ†äº«æŒ‰é’®
6. **è¯„è®ºç³»ç»Ÿ** - é›†æˆè¯„è®ºåŠŸèƒ½

---

**æ›´æ–°æ—¶é—´**: 2025-10-30
**çŠ¶æ€**: âœ… æ‰€æœ‰ä¸»è¦é—®é¢˜å·²ä¿®å¤ï¼Œç­‰å¾… Vercel éƒ¨ç½²éªŒè¯
