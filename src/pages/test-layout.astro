---
/**
 * æµ‹è¯• Quartz å¸ƒå±€
 * éªŒè¯ä¸‰æ å¸ƒå±€æ˜¯å¦æ­£å¸¸å·¥ä½œ
 */
import QuartzLayout from '../layouts/QuartzLayout.astro';
import PageTitle from '../components/quartz/PageTitle';
import Footer from '../components/quartz/Footer';
import Darkmode from '../components/quartz/Darkmode';
import Explorer from '../components/quartz/Explorer';
import Search from '../components/quartz/Search';
import TableOfContents from '../components/quartz/TableOfContents';
import ContentMeta from '../components/quartz/ContentMeta';
import TagList from '../components/quartz/TagList';
import Breadcrumbs from '../components/quartz/Breadcrumbs';
import ReaderMode from '../components/quartz/ReaderMode';
---

<QuartzLayout title="æµ‹è¯• Quartz å¸ƒå±€" currentSlug="test-layout">
  <!-- Left Sidebar -->
  <div slot="left-sidebar">
    <!-- PageTitle ç»„ä»¶ -->
    <PageTitle title="I want to learn" client:load />
    
    <!-- Darkmode åˆ‡æ¢ & ReaderMode -->
    <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1rem; padding: 1rem; border: 1px solid var(--lightgray); border-radius: 5px; background: var(--light);">
      <span style="font-size: 0.875rem; color: var(--darkgray); font-weight: 600;">æ§åˆ¶ï¼š</span>
      <Darkmode client:only="react" />
      <ReaderMode client:only="react" />
    </div>
    
    <!-- Search æœç´¢ç»„ä»¶ -->
    <Search client:only="react" enablePreview={true} />
    
    <!-- Explorer æ–‡ä»¶æµè§ˆå™¨ -->
    <Explorer client:only="react" title="æ–‡ç« æµè§ˆ" folderDefaultState="open" />
    
    <div style="padding: 1rem; background: var(--highlight); border-radius: 5px; margin-top: 1rem;">
      <p style="font-size: 0.875rem; color: var(--gray); margin: 0 0 0.5rem 0; font-weight: 600;">
        âœ… å·²å®Œæˆç»„ä»¶ï¼ˆ12/17ï¼Œ71%ï¼‰ï¼š
      </p>
      <ul style="font-size: 0.75rem; margin: 0; padding-left: 1.5rem; color: var(--gray);">
        <li>âœ… PageTitle</li>
        <li>âœ… Darkmode</li>
        <li>âœ… ReaderMode</li>
        <li>âœ… Popover</li>
        <li>âœ… Search</li>
        <li>âœ… Explorer</li>
        <li>âœ… TableOfContents</li>
        <li>âœ… Breadcrumbs</li>
        <li>âœ… ContentMeta</li>
        <li>âœ… TagList</li>
        <li>âœ… Footer</li>
        <li>âœ… Backlinks (å·²æœ‰)</li>
      </ul>
    </div>
  </div>

  <!-- Header -->
  <div slot="header">
    <h1 style="margin: 0;">æµ‹è¯•é¡µé¢æ ‡é¢˜</h1>
  </div>

  <!-- Before Body -->
  <div slot="before-body">
    <!-- Breadcrumbs é¢åŒ…å±‘å¯¼èˆª -->
    <Breadcrumbs 
      items={[
        { label: 'é¦–é¡µ', path: '/' },
        { label: 'æµ‹è¯•', path: '/test' },
        { label: 'Quartz å¸ƒå±€æµ‹è¯•', path: '/test-layout' }
      ]}
      client:load
    />
    
    <!-- ContentMeta å…ƒæ•°æ® -->
    <ContentMeta 
      publishedAt={new Date()}
      readingTime="2 åˆ†é’Ÿé˜…è¯»"
      author="Admin"
      client:load
    />
    
    <!-- TagList æ ‡ç­¾åˆ—è¡¨ -->
    <TagList 
      tags={['Quartz', 'å¸ƒå±€æµ‹è¯•', 'ç»„ä»¶è¿ç§»']}
      client:load
    />
  </div>

  <!-- Main Content -->
  {/* Popover é¢„è§ˆæç¤ºå†…å®¹ */}
  <div class="popover-hint">
    <h1>Quartz å¸ƒå±€æµ‹è¯•</h1>
    
    <!-- Popover åŠŸèƒ½æµ‹è¯• -->
    <div style="margin-bottom: 2rem; padding: 1rem; border: 1px solid var(--lightgray); border-radius: 5px; background: var(--highlight);">
      <h3 style="color: var(--dark); font-size: 1.25rem; margin-bottom: 0.5rem;">ğŸ” Popover æ‚¬æµ®é¢„è§ˆæµ‹è¯•</h3>
      <p style="color: var(--gray); font-size: 0.875rem; margin-bottom: 1rem;">
        å°†é¼ æ ‡æ‚¬åœåœ¨ä¸‹é¢çš„é“¾æ¥ä¸Šï¼ŒæŸ¥çœ‹ Popover é¢„è§ˆæ•ˆæœï¼ˆæ¡Œé¢ç«¯æœ‰æ•ˆï¼‰ï¼š
      </p>
      <div style="display: flex; flex-direction: column; gap: 0.5rem;">
        <p style="color: var(--dark);">
          æµ‹è¯•å†…éƒ¨é“¾æ¥ï¼š<a href="/articles/1" class="internal" style="color: var(--secondary); text-decoration: underline;">ç¤ºä¾‹æ–‡ç«  1</a>
        </p>
        <p style="color: var(--dark);">
          æµ‹è¯•æ ‡ç­¾é“¾æ¥ï¼š<a href="/tags/æŠ€æœ¯" class="internal" style="color: var(--secondary); text-decoration: underline;">#æŠ€æœ¯</a>
        </p>
        <p style="color: var(--gray); font-size: 0.75rem; font-style: italic;">
          æ³¨æ„ï¼šå¦‚æœæ–‡ç« ä¸å­˜åœ¨ï¼Œé¢„è§ˆå°†ä¸ä¼šæ˜¾ç¤ºã€‚éœ€è¦åœ¨æ•°æ®åº“ä¸­æœ‰çœŸå®æ–‡ç« æ‰èƒ½çœ‹åˆ°é¢„è§ˆæ•ˆæœã€‚
        </p>
      </div>
    </div>
    
    <p>è¿™æ˜¯ä¸»è¦å†…å®¹åŒºåŸŸã€‚åœ¨æ¡Œé¢ç«¯ï¼ˆ>1200pxï¼‰æ—¶ï¼š</p>
  <ul>
    <li><strong>å·¦ä¾§</strong>ï¼šæ˜¾ç¤ºä¾§è¾¹æ ï¼ˆå›ºå®šå®½åº¦ 320pxï¼‰</li>
    <li><strong>ä¸­é—´</strong>ï¼šæ˜¾ç¤ºä¸»è¦å†…å®¹ï¼ˆè‡ªé€‚åº”å®½åº¦ï¼‰</li>
    <li><strong>å³ä¾§</strong>ï¼šæ˜¾ç¤ºä¾§è¾¹æ ï¼ˆå›ºå®šå®½åº¦ 320pxï¼‰</li>
  </ul>
  
  <p>åœ¨å¹³æ¿ç«¯ï¼ˆ800px-1200pxï¼‰æ—¶ï¼š</p>
  <ul>
    <li><strong>å·¦ä¾§</strong>ï¼šæ˜¾ç¤ºä¾§è¾¹æ </li>
    <li><strong>å³ä¾§</strong>ï¼šç§»åˆ°ä¸‹æ–¹</li>
  </ul>
  
  <p>åœ¨ç§»åŠ¨ç«¯ï¼ˆå°äº 800pxï¼‰æ—¶ï¼š</p>
  <ul>
    <li>æ‰€æœ‰å†…å®¹å‚ç›´å †å </li>
  </ul>

  <h2>æµ‹è¯• Callout</h2>
  
  <div class="callout" data-callout="note">
    <div class="callout-title">
      <div class="callout-icon"></div>
      <div class="callout-title-inner">ç¬”è®°</div>
    </div>
    <div class="callout-content" style="grid-template-rows: 1fr;">
      <div>
        <p>è¿™æ˜¯ä¸€ä¸ªæµ‹è¯• Calloutï¼ŒéªŒè¯æ ·å¼æ˜¯å¦æ­£å¸¸ã€‚</p>
      </div>
    </div>
  </div>

  <h2>æµ‹è¯•é“¾æ¥æ ·å¼</h2>
  
  <p>
    è¿™æ˜¯ä¸€ä¸ª <a href="#" class="internal">å†…éƒ¨é“¾æ¥</a>ï¼Œ
    è¿™æ˜¯ä¸€ä¸ª <a href="https://example.com" class="external">å¤–éƒ¨é“¾æ¥</a>ï¼Œ
    è¿™æ˜¯ä¸€ä¸ª <a href="#" class="tag-link">æ ‡ç­¾é“¾æ¥</a>ã€‚
  </p>

  <p>
    è¿™æ˜¯ <span class="text-highlight">é«˜äº®æ–‡æœ¬</span> çš„æ ·å¼æµ‹è¯•ã€‚
  </p>

  <!-- After Body -->
  <div slot="after-body">
    <div style="padding: 1rem; background: var(--highlight); border-radius: 5px;">
      <p style="font-size: 0.875rem; margin: 0;">
        â„¹ï¸ After Body åŒºåŸŸï¼ˆå¯ä»¥æ”¾ç½®ç›¸å…³æ–‡ç« æ¨èç­‰ï¼‰
      </p>
    </div>
  </div>

  <!-- Right Sidebar -->
  <div slot="right-sidebar">
    <!-- TableOfContents ç›®å½•ç»„ä»¶ -->
    <TableOfContents client:only="react" />
    
    <div style="padding: 1rem; background: var(--highlight); border-radius: 5px; margin-top: 1rem;">
      <p style="font-size: 0.875rem; color: var(--gray); margin: 0;">
        â¬‡ï¸ ä¸‹ä¸€æ­¥å°†æ·»åŠ ï¼š
      </p>
      <ul style="font-size: 0.875rem; margin: 0.5rem 0; padding-left: 1.5rem;">
        <li>Graph çŸ¥è¯†å›¾è°±</li>
        <li>Backlinks åå‘é“¾æ¥</li>
      </ul>
    </div>
  </div>

  <!-- Footer -->
  <div slot="footer">
    <Footer 
      links={{
        "GitHub": "https://github.com/yourusername/ioto-doc",
        "æ–‡æ¡£": "https://quartz.jzhao.xyz/"
      }}
      client:load 
    />
  </div>
</QuartzLayout>

<script>
  // æ˜¾ç¤ºå½“å‰ä¸»é¢˜
  function updateThemeDisplay() {
    const currentTheme = document.documentElement.getAttribute('saved-theme') || 'light';
    const themeEl = document.getElementById('current-theme');
    if (themeEl) {
      themeEl.textContent = currentTheme;
      themeEl.style.fontWeight = '600';
      themeEl.style.color = currentTheme === 'dark' ? '#7b97aa' : '#284b63';
    }
  }
  
  // åˆå§‹æ˜¾ç¤º
  updateThemeDisplay();
  
  // ç›‘å¬ä¸»é¢˜å˜åŒ–
  document.addEventListener('themechange', updateThemeDisplay);
  
  // å®šæœŸæ›´æ–°ï¼ˆè°ƒè¯•ç”¨ï¼‰
  setInterval(updateThemeDisplay, 500);
</script>

