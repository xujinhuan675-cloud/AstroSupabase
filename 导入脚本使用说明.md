# ğŸ“¦ å¯¼å…¥è„šæœ¬ä½¿ç”¨è¯´æ˜

## ğŸ¯ å¯¼å…¥è„šæœ¬è¿è¡Œä½ç½®

### è¿è¡Œç¯å¢ƒ

```
æœ¬åœ°ç”µè„‘ (Windows)
  â†“ æ‰§è¡Œå‘½ä»¤
npm run import
  â†“ è¯»å–
æœ¬åœ° Markdown æ–‡ä»¶ (content/articles/*.md)
  â†“ ç½‘ç»œè¿æ¥
Supabase æ•°æ®åº“ (è¿œç¨‹ PostgreSQL)
  â†“ å†™å…¥æ•°æ®
articles, article_tags, article_links è¡¨
```

### è§’è‰²åˆ†å·¥

| ç»„ä»¶ | è§’è‰² | è¯´æ˜ |
|------|------|------|
| ğŸ–¥ï¸ **æœ¬åœ°ç”µè„‘** | è¿è¡Œå¯¼å…¥è„šæœ¬ | æ‰§è¡Œ `npm run import` |
| ğŸ“ **æœ¬åœ°æ–‡ä»¶** | æ•°æ®æº | `content/articles/*.md` |
| ğŸ—„ï¸ **Supabase** | æ•°æ®å­˜å‚¨ | è¿œç¨‹ PostgreSQL æ•°æ®åº“ |
| ğŸŒ **Vercel** | ç½‘ç«™éƒ¨ç½² | ä¸å‚ä¸å¯¼å…¥ï¼Œåªè´Ÿè´£å±•ç¤º |

---

## ğŸš€ ä½¿ç”¨æ­¥éª¤

### Step 1: é…ç½®ç¯å¢ƒå˜é‡

**åˆ›å»º `.env` æ–‡ä»¶**ï¼ˆåœ¨ `F:\IOTO-Doc\AstroSupabase\` ç›®å½•ï¼‰ï¼š

```bash
# å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶
copy .env.example .env
```

**ç¼–è¾‘ `.env` æ–‡ä»¶**ï¼Œå¡«å…¥ä½ çš„ Supabase ä¿¡æ¯ï¼š

```env
DATABASE_URL=postgresql://postgres:[å¯†ç ]@db.[é¡¹ç›®ID].supabase.co:5432/postgres
PUBLIC_SUPABASE_URL=https://[é¡¹ç›®ID].supabase.co
PUBLIC_SUPABASE_ANON_KEY=ä½ çš„-anon-key
PUBLIC_SITE_URL=http://localhost:4321
```

### Step 2: è·å– Supabase è¿æ¥ä¿¡æ¯

1. ç™»å½• [Supabase Dashboard](https://supabase.com/dashboard)
2. é€‰æ‹©ä½ çš„é¡¹ç›®
3. ç‚¹å‡»å·¦ä¾§ **Settings** â†’ **Database**
4. åœ¨ **Connection string** éƒ¨åˆ†æ‰¾åˆ°ï¼š
   - **URI**: å°±æ˜¯ä½ çš„ `DATABASE_URL`
   - å°† `[YOUR-PASSWORD]` æ›¿æ¢ä¸ºä½ çš„æ•°æ®åº“å¯†ç 
5. ç‚¹å‡» **API Settings** è·å–ï¼š
   - **Project URL**: å°±æ˜¯ `PUBLIC_SUPABASE_URL`
   - **anon public**: å°±æ˜¯ `PUBLIC_SUPABASE_ANON_KEY`

### Step 3: å‡†å¤‡ Markdown æ–‡ä»¶

å°†æ–‡ç« æ”¾åœ¨ `content/articles/` ç›®å½•ï¼š

```
AstroSupabase/
â””â”€â”€ content/
    â””â”€â”€ articles/
        â”œâ”€â”€ example.md        âœ… (å·²æœ‰)
        â”œâ”€â”€ my-note.md        â¬…ï¸ ä½ çš„æ–‡ç« 
        â””â”€â”€ another-note.md   â¬…ï¸ ä½ çš„æ–‡ç« 
```

**Markdown æ–‡ä»¶æ ¼å¼**ï¼š

```markdown
---
title: "æ–‡ç« æ ‡é¢˜"
slug: "article-slug"  # å¯é€‰ï¼Œä¸å¡«ä¼šè‡ªåŠ¨ç”Ÿæˆ
excerpt: "æ–‡ç« æ‘˜è¦"
tags: [æ ‡ç­¾1, æ ‡ç­¾2]
author: "ä½œè€…å"
status: published  # æˆ– draft
---

# æ­£æ–‡æ ‡é¢˜

è¿™æ˜¯æ–‡ç« å†…å®¹ã€‚

ä½¿ç”¨ [[åŒå‘é“¾æ¥]] è¯­æ³•é“¾æ¥å…¶ä»–æ–‡ç« ã€‚
ä½¿ç”¨ #æ ‡ç­¾ æ ‡è®°å†…å®¹ã€‚
```

### Step 4: æ‰§è¡Œå¯¼å…¥

```bash
cd F:\IOTO-Doc\AstroSupabase
npm run import
```

### Step 5: æŸ¥çœ‹ç»“æœ

å¯¼å…¥æˆåŠŸåï¼Œè®¿é—®ï¼š
- ğŸ“ æ–‡ç« åˆ—è¡¨ï¼šhttp://localhost:4321
- ğŸŒ çŸ¥è¯†å›¾è°±ï¼šhttp://localhost:4321/graph

---

## ğŸ“‚ æ–‡ç« æ¥æºä½ç½®

### âœ… é€‰é¡¹ 1: ä¸“ç”¨ç›®å½•ï¼ˆæ¨èï¼‰

```
F:\IOTO-Doc\AstroSupabase\content\articles\
```

**ä¼˜ç‚¹**ï¼š
- âœ… ä¸é¡¹ç›®é›†æˆ
- âœ… è·¯å¾„å·²é…ç½®
- âœ… ç‰ˆæœ¬æ§åˆ¶å‹å¥½

### ğŸ”„ é€‰é¡¹ 2: IOTO æ¡†æ¶ç›®å½•

ä» IOTO æ¡†æ¶å¤åˆ¶æ–‡ä»¶ï¼š

```powershell
# ä»ç¢ç‰‡ç¬”è®°å¯¼å…¥
copy "F:\IOTO-Doc\1-Input\2-ç¢ç‰‡ç¬”è®°\*.md" "F:\IOTO-Doc\AstroSupabase\content\articles\"

# ä»ç³»ç»Ÿç¬”è®°å¯¼å…¥
copy "F:\IOTO-Doc\1-Input\4-ç³»ç»Ÿç¬”è®°\*.md" "F:\IOTO-Doc\AstroSupabase\content\articles\"

# ä»å¡ç‰‡ç¬”è®°å¯¼å…¥
copy "F:\IOTO-Doc\2-Output\2-å¡ç‰‡ç¬”è®°\*.md" "F:\IOTO-Doc\AstroSupabase\content\articles\"
```

ç„¶åè¿è¡Œï¼š

```bash
npm run import
```

### ğŸ”§ é€‰é¡¹ 3: ä¿®æ”¹å¯¼å…¥è·¯å¾„

ç¼–è¾‘ `scripts/import-markdown.ts`ï¼š

```typescript
// æ‰¾åˆ°è¿™ä¸€è¡Œï¼ˆçº¦ç¬¬ 76 è¡Œï¼‰
const contentDir = join(process.cwd(), 'content', 'articles');

// æ”¹ä¸ºä½ çš„è·¯å¾„
const contentDir = 'F:/IOTO-Doc/1-Input/4-ç³»ç»Ÿç¬”è®°';
```

ç„¶åè¿è¡Œå¯¼å…¥å‘½ä»¤ã€‚

---

## ğŸ” å¯¼å…¥æµç¨‹è¯¦è§£

### 1. æ‰«ææ–‡ä»¶
```
ğŸ“‚ æ‰«æ content/articles/ ç›®å½•
   â†“
æ‰¾åˆ°æ‰€æœ‰ .md æ–‡ä»¶
```

### 2. è§£æ Markdown
```
ğŸ“„ è¯»å–æ–‡ä»¶å†…å®¹
   â†“
è§£æ frontmatterï¼ˆæ ‡é¢˜ã€æ ‡ç­¾ç­‰ï¼‰
   â†“
æå–æ­£æ–‡å†…å®¹
   â†“
è¯†åˆ« [[åŒå‘é“¾æ¥]] å’Œ #æ ‡ç­¾
```

### 3. æ£€æŸ¥é‡å¤
```
ğŸ” æ£€æŸ¥ slug æ˜¯å¦å·²å­˜åœ¨
   â†“
å­˜åœ¨ â†’ è·³è¿‡
ä¸å­˜åœ¨ â†’ ç»§ç»­
```

### 4. å†™å…¥æ•°æ®åº“
```
ğŸ’¾ æ’å…¥åˆ° articles è¡¨
   â†“
è§£æé“¾æ¥å…³ç³» â†’ articleLinks è¡¨
   â†“
æå–æ ‡ç­¾ â†’ articleTags è¡¨
```

### 5. å®Œæˆ
```
âœ… æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
   - æˆåŠŸ: X ç¯‡
   - è·³è¿‡: Y ç¯‡
   - å¤±è´¥: Z ç¯‡
```

---

## ğŸ”„ å·¥ä½œæµç¤ºä¾‹

### åœºæ™¯ 1: Obsidian â†’ AstroSupabase

```bash
# 1. åœ¨ Obsidian ä¸­ç¼–å†™ç¬”è®°
# ä½ç½®: ä»»æ„ Obsidian Vault

# 2. å¤åˆ¶åˆ°å¯¼å…¥ç›®å½•
copy "C:\MyObsidianVault\MyNote.md" "F:\IOTO-Doc\AstroSupabase\content\articles\"

# 3. å¯¼å…¥åˆ°æ•°æ®åº“
cd F:\IOTO-Doc\AstroSupabase
npm run import

# 4. å¯åŠ¨ç½‘ç«™æŸ¥çœ‹
npm run dev
# è®¿é—® http://localhost:4321
```

### åœºæ™¯ 2: IOTO æ¡†æ¶ â†’ AstroSupabase

```bash
# 1. æ‰¹é‡å¤åˆ¶ IOTO ç¬”è®°
copy "F:\IOTO-Doc\1-Input\4-ç³»ç»Ÿç¬”è®°\*.md" "F:\IOTO-Doc\AstroSupabase\content\articles\"

# 2. å¯¼å…¥
npm run import

# 3. æŸ¥çœ‹çŸ¥è¯†å›¾è°±
npm run dev
# è®¿é—® http://localhost:4321/graph
```

### åœºæ™¯ 3: ç›´æ¥ä» IOTO ç›®å½•å¯¼å…¥

ç¼–è¾‘ `scripts/import-markdown.ts`ï¼š

```typescript
const contentDir = 'F:/IOTO-Doc/1-Input/4-ç³»ç»Ÿç¬”è®°';
```

ç„¶åï¼š

```bash
npm run import
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: `DATABASE_URL is not set` é”™è¯¯

**åŸå› **: æ²¡æœ‰é…ç½® `.env` æ–‡ä»¶

**è§£å†³**:
```bash
# åˆ›å»º .env æ–‡ä»¶
copy .env.example .env

# ç¼–è¾‘ .env å¡«å…¥ Supabase ä¿¡æ¯
```

### Q2: å¯¼å…¥åæ–‡ç« ä¸æ˜¾ç¤º

**åŸå› **: æ–‡ç« çŠ¶æ€å¯èƒ½æ˜¯ `draft`

**è§£å†³**: å°† frontmatter ä¸­çš„ `status` æ”¹ä¸º `published`ï¼š

```yaml
---
title: "æ–‡ç« æ ‡é¢˜"
status: published  # æ”¹è¿™é‡Œ
---
```

### Q3: é“¾æ¥æ— æ³•è§£æ

**åŸå› **: ç›®æ ‡æ–‡ç« ä¸å­˜åœ¨æˆ– slug ä¸åŒ¹é…

**è§£å†³**:
1. ç¡®ä¿è¢«é“¾æ¥çš„æ–‡ç« å·²å¯¼å…¥
2. æ£€æŸ¥ slug æ˜¯å¦åŒ¹é…
3. é‡æ–°è¿è¡Œå¯¼å…¥æ›´æ–°é“¾æ¥å…³ç³»

### Q4: æ‰¾ä¸åˆ° content/articles ç›®å½•

**è§£å†³**:

```bash
# åˆ›å»ºç›®å½•
mkdir content\articles

# æˆ–è€…ä¿®æ”¹å¯¼å…¥è„šæœ¬è·¯å¾„
```

---

## ğŸ“Š å¯¼å…¥ç»Ÿè®¡

å¯¼å…¥æˆåŠŸåä¼šæ˜¾ç¤ºï¼š

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š å¯¼å…¥ç»Ÿè®¡:
   âœ… æˆåŠŸ: 5 ç¯‡
   â­ï¸  è·³è¿‡: 2 ç¯‡
   âŒ å¤±è´¥: 0 ç¯‡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ‰ å¯¼å…¥å®Œæˆï¼è®¿é—® http://localhost:4321 æŸ¥çœ‹æ–‡ç« 
```

**ç»Ÿè®¡è¯´æ˜**ï¼š
- **æˆåŠŸ**: æ–°å¯¼å…¥çš„æ–‡ç« æ•°é‡
- **è·³è¿‡**: å·²å­˜åœ¨çš„æ–‡ç« ï¼ˆæ ¹æ® slug åˆ¤æ–­ï¼‰
- **å¤±è´¥**: å¯¼å…¥å‡ºé”™çš„æ–‡ç« 

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. æ–‡ç« ç»„ç»‡

```
content/articles/
â”œâ”€â”€ drafts/              # è‰ç¨¿ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ published/           # å·²å‘å¸ƒï¼ˆå¯é€‰ï¼‰
â””â”€â”€ *.md                 # ç›´æ¥æ”¾åœ¨æ ¹ç›®å½•ä¹Ÿå¯ä»¥
```

### 2. æ–‡ä»¶å‘½å

```
âœ… å¥½çš„å‘½å:
- my-first-note.md
- react-hooks-guide.md
- 2024-01-15-weekly-review.md

âŒ é¿å…:
- æœªå‘½å.md
- temp.md
- test123.md
```

### 3. æ‰¹é‡å¯¼å…¥æµç¨‹

```bash
# 1. å…ˆå¯¼å…¥åŸºç¡€æ–‡ç« ï¼ˆä¸å«é“¾æ¥ï¼‰
npm run import

# 2. å†å¯¼å…¥å¼•ç”¨æ–‡ç« ï¼ˆå«é“¾æ¥ï¼‰
npm run import

# 3. é“¾æ¥ä¼šè‡ªåŠ¨å»ºç«‹
```

---

## ğŸ”® é«˜çº§ç”¨æ³•

### è‡ªåŠ¨ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼ˆè®¡åˆ’ä¸­ï¼‰

æœªæ¥å¯ä»¥ä½¿ç”¨ `chokidar` ç›‘å¬æ–‡ä»¶å˜åŒ–è‡ªåŠ¨å¯¼å…¥ï¼š

```bash
npm run watch:import  # è®¡åˆ’ä¸­çš„åŠŸèƒ½
```

### æ‰¹é‡æ›´æ–°é“¾æ¥

å¦‚æœæ‰‹åŠ¨ä¿®æ”¹äº†æ•°æ®åº“ä¸­çš„æ–‡ç« ï¼Œè¿è¡Œæ­¤å‘½ä»¤æ›´æ–°æ‰€æœ‰é“¾æ¥ï¼š

```bash
npm run update:links  # éœ€è¦è‡ªå·±åˆ›å»ºè„šæœ¬
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [QUICKSTART.md](./QUICKSTART.md) - å¿«é€Ÿå¼€å§‹
- [QUARTZ_USAGE_GUIDE.md](./QUARTZ_USAGE_GUIDE.md) - å®Œæ•´ä½¿ç”¨æ‰‹å†Œ
- [é›†æˆå®Œæˆæ€»ç»“.md](./é›†æˆå®Œæˆæ€»ç»“.md) - é›†æˆæ€»ç»“

---

**æ€»ç»“**: å¯¼å…¥è„šæœ¬åœ¨ä½ çš„**æœ¬åœ°ç”µè„‘**è¿è¡Œï¼Œè¯»å–**æœ¬åœ° Markdown æ–‡ä»¶**ï¼Œå†™å…¥**Supabase è¿œç¨‹æ•°æ®åº“**ã€‚Vercel åªè´Ÿè´£éƒ¨ç½²ç½‘ç«™ï¼Œä¸å‚ä¸å¯¼å…¥è¿‡ç¨‹ã€‚

